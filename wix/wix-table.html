<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://use.fontawesome.com/c47bc38e87.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

</head>

<body>
  <style>
    @import url(https://unpkg.com/@webpixels/css@1.1.5/dist/index.css);
    @import url("https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.4.0/font/bootstrap-icons.min.css");
  </style>
  <div class="table-responsive">
    <table class="table table-hover table-nowrap">
      <thead class="thead-light">
        <tr>
          <th scope="col">Plan Name</th>
          <th scope="col">Purchase Date</th>
          <th scope="col">Amount</th>
          <th scope="col">Status</th>
        </tr>
      </thead>
      <tbody id="table-container"></tbody>
    </table>
  </div>
  <script>
    jQuery(document).ready(function ($) {
      window.onmessage = function (event) {
        if (event.data && Array.isArray(event.data)) {
          let ulContainer = document.getElementById("table-container");
          ulContainer.innerHTML = event.data
            .map((item, idx) =>
              `<tr>
                  <td>
                    <img
                        alt="..."
                        src="${item.badge}"
                        class="avatar avatar-sm rounded-circle me-2"
                    />
                    <a class="text-heading font-semibold" href="#">${item.plan}</a>
                  </td>
                  <td>${item.purchaseDate}</td>
                  <td>Â£ ${item.amount.toLocaleString("en-US")}</td>
                  <td>
                    <span class="badge badge-lg badge-dot">
                        <i class=${item.status === "Successful" ? "bg-success" : "bg-danger"}></i>${item.status}
                    </span>
                  </td>
              </tr>`
            )
            .join("\n");
        }
      };

      var event = {
        data: [
          {
            plan: "Basic",
            purchaseDate: "06/02/2020",
            amount: "1000",
            status: "success",
            badge: "https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
          },
          {
            plan: "Silver",
            purchaseDate: "06/04/2020",
            amount: "1000",
            status: "failed",
            badge: "https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
          },
          {
            plan: "Gold",
            purchaseDate: "06/04/2020",
            amount: "1000",
            status: "failed",
            badge: "https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
          },
          {
            plan: "Platinum",
            purchaseDate: "06/04/2020",
            amount: "1000",
            status: "success",
            badge: "https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
          },
        ],
      };
      // window.onmessage(event);
    });
  </script>
</body>

</html>